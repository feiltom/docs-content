---
meta:
  title: Creating backups with Restic and Object Storage
  description: This page shows how to create backups with Restic and Object Storage
content:
  h1: Creating backups with Restic and Object Storage
  paragraph: This page shows how to create backups with Restic and Object Storage
tags: restic-backup restic-s3 backup-s3 object-storage 
categories:
  - storage
  - compute
  - object-storage
dates:
  validation: 2022-03-31
  posted: 2022-04-04
---

Restic is a backup tool that allows you to back up your Linux, Windows, Mac or BSD machines and send your backups to repositories via [different storage protocols](https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html), including S3 (Object Storage). 

In this tutorial you learn how to backup a Scaleway Instance running on Ubunutu 20.04 using Restic and Object Storage.

<Message type="requirement">

- You have an account and are logged into the [Scaleway console](https://console.scaleway.com)
- You have [configured your SSH Key](/console/my-project/how-to/create-ssh-key/)
- You have generated [your API key](/console/my-project/how-to/generate-api-key/)
- You have a [Scaleway Instance](/compute/instances/how-to/create-an-instance) running on Ubuntu Focal Fossa (20.04)
- You have [created an Object Storage bucket](/storage/object/how-to/create-a-bucket/)

</Message>

## Installing Restic

1. Connect to your Instance with SSH. In a terminal run:

```
ssh root@<your_instance_ip>
```

2. Update the system and upgrade the software already installed on the Instance.

```
apt update && apt upgrade -y
``` 

3. Install Restic. 

```
apt-get install restic
```

4. Ensure the installation was successful by checking the version.

```
restic version
```

## Setting up the S3 repository

A repository is the storage space where your backups will be hosted. In this tutorial, we will use Scaleway Object Storage buckets to host our backups.

1. Set up your [environment variables](https://github.com/scaleway/scaleway-sdk-go/tree/master/scw#environment-variables), if you have not done so yet. Replace `$SCW_ACCESS_KEY`, `$SCW_SECRET_KEY` and `$SCW_DEFAULT_PROJECT_ID` by their corresponding values.

```
export SCW_ACCESS_KEY=$SCW_ACCESS_KEY
export SCW_SECRET_KEY=$SCW_SECRET_KEY
export SCW_DEFAULT_PROJECT_ID=$SCW_DEFAULT_PROJECT_ID
```

2. Initialize the repository using your bucket's endpoint as a backend. Your bucket endpoint can be found in the **Bucket Settings** tab under **Bucket Information** 

```
restic -r s3:https://<bucket_name>.s3.fr-par.scw.cloud init
```
restic -r s3:https://ahouseisnotahome.s3.fr-par.scw.cloud init

./restic -o s3.bucket-lookup=dns -o s3.region=fr-par -r s3:https://s3.scw.cloud/ahouseisnotahome init

restic -r s3:https://s3.fr-par.scw.cloud/ahouseisnotahome init